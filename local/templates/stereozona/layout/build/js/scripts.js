function initAlphabet(){var e=$('[data-toggle="tooltip"]'),t=$(".alphabet__letter-btn");$(window).width()<1200&&t.click((function(e){e.preventDefault()})),e.tooltip({placement:"top",html:!0,template:'<div class="tooltip alphabet__letter-content" role="tooltip"><div class="tooltip-inner alphabet__letter-content-list"></div></div>',trigger:"manual",offset:0}).on({mouseenter:function(){$(".alphabet__letter-btn").removeClass("is-active"),$(this).addClass("is-active"),e.tooltip("hide"),$(this).tooltip("show"),$(".alphabet__letter-btn:not(.is-active)").addClass("inactive")},mouseleave:function(){$(this).removeClass("is-active");var e=setInterval(function(){$(".alphabet__container:hover").length||$(".alphabet__letter-content:hover").length||($(".alphabet__letter-btn").removeClass("inactive"),$(".alphabet__letter-btn").removeClass("is-active"),$(this).tooltip("hide"),clearInterval(e))}.bind(this),200)}})}document.addEventListener("pageLoaded",initAlphabet);var observer=new IntersectionObserver((function(e){e.forEach((function(e){e.intersectionRatio>0&&setTimeout((function(){e.target.classList.add("is-visible")}),200)}))}),{threshold:[0,.25,.5,.75,1]}),observe=function(){window.observerElements=$(".js-observe"),window.observerElements.each((function(e,t){observer.observe(t)}))};function filterByBrandName(e,t){for(var o=e.innerText.trim().toLowerCase().split(" "),n=0;n<o.length;n++)if(0===o[n].indexOf(t.toLowerCase()))return!0}function filterByCategory(e,t){return t.includes(e.dataset.brandid)}function filterByCountry(e,t){return e.dataset.brandcountry===t}function filterBrands(){var e=$(".brands__form-input"),t=$(".js-select-category .select__input"),o=$(".js-select-country .select__input"),n=null;e.length>0&&(n=e[0].value.trim().toLowerCase());var a=null;t.length>0&&((r=(i=t[0]).options[i.options.selectedIndex]).dataset.brandids&&(a=JSON.parse(r.dataset.brandids)));var i,r,s=null;o.length>0&&((r=(i=o[0]).options[i.options.selectedIndex]).value&&!("brandignore"in r.dataset)&&(s=r.value));$("[data-brandcode]").each((function(e,t){var o=!n||filterByBrandName(t,n),i=!a||filterByCategory(t,a),r=!s||filterByCountry(t,s);o&&i&&r?$(t).removeClass("u-hidden"):$(t).addClass("u-hidden")})),$(".brands__row").children().each(((e,t)=>{$(t).find(".brand-letter__item.u-hidden").length===$(t).find(".brand-letter__item").length?$(t).addClass("u-hidden"):$(t).removeClass("u-hidden")}))}document.addEventListener("pageLoaded",observe),document.addEventListener("swup:transitionStart",(function(){var e=$(".js-select-category .select__input"),t=$(".js-select-country .select__input");e.length>0&&e.off("change",filterBrands),t.length>0&&t.off("change",filterBrands)})),document.addEventListener("pageLoaded",(function(){var e=$(".brands__form-input"),t=$(".js-select-category .select__input"),o=$(".js-select-country .select__input");filterBrands(),e.length>0&&e.on("input",filterBrands),t.length>0&&t.on("change",filterBrands),o.length>0&&o.on("change",filterBrands)})),$(document).on("click","[data-brandcode]",(function(e){if(e.preventDefault(),$(window).width()<1200&&this.href)return window.location.href=this.href;var t=this.dataset.brandcode;if(!t)return!1;$.ajax("/ajax/brand/get.php",{data:{brandcode:t},success:function(e){if(!e||"string"!=typeof e)return!1;$(".brands__aside").html(e)}})}));var callbacksBrand=[],settings_slider_brand={dots:!0,arrows:!0,infinite:!1,slidesToShow:3,slidesToScroll:1};function initBrand(){$(".brand__section-list").length>0&&handleSlickBrand($(".brand__section-list"),settings_slider_brand)}function handleSlickBrand(e,t){var o=function(){if(!($(window).width()>767))return e.hasClass("slick-initialized")?void 0:e.slick(t);e.hasClass("slick-initialized")&&e.slick("unslick")};"interactive"===document.readyState?($(window).on("load resize",o),callbacksBrand.push(o)):($(window).on("resize",o),callbacksBrand.push(o),o())}function initBreadcrumbs(){if($(window).width()<768){var e=$(".breadcrumbs");$(".breadcrumbs__link").length>2&&(e.addClass("is-full"),e.find(".breadcrumbs__link:first").after('<a href="#" class="breadcrumbs__icon" data-no-swup></a>')),$(".breadcrumbs__icon").on("click",(function(t){t.preventDefault(),e.removeClass("is-full"),$(this).remove()}))}}document.addEventListener("pageLoaded",(function(){callbacksBrand.forEach((function(e){$(window).off("load resize",e)})),callbacksBrand=[],initBrand()})),document.addEventListener("DOMContentLoaded",(function(){var e=document.querySelector("header.header"),t=document.querySelector(".brand-preview"),o=document.querySelector(".brands__aside");if(o&&t){var n=window.getComputedStyle(o,null).getPropertyValue("padding-top"),a=Math.floor(Number(n.replace("px",""))),i=document.documentElement.clientHeight-(e.clientHeight+a);t.style.height=i+"px"}})),document.addEventListener("pageLoaded",initBreadcrumbs);var asideFilter,modalFilter,settings_slider_card={mobileFirst:!0,arrows:!1,dots:!1,variableWidth:!0},callbacksCard=[];function checkPositionSlider(){$(window).width()<=992?$(".card-slider").not(".slick-initialized").slick(settings_slider_card):$(".card-slider.slick-initialized").slick("unslick")}function initCartOverall(){if($(window).width()>767){var e=$(".cart-item__price-overall");if(e.length){var t=0;e.each((function(){var e=$(this).outerWidth();e>t&&(t=e)})),e.width(t)}}}function initCatalogSort(){$(".catalog__sorting-btn").on("click",(function(e){e.preventDefault(),$(".catalog__wrapper-sorting-dropdown").fadeIn(300),$(".catalog__sorting-overflow").fadeIn(300)})),$(".catalog__sorting-overflow").on("click",(function(e){$(".catalog__wrapper-sorting-dropdown").fadeOut(300),$(".catalog__sorting-overflow").fadeOut(300)}))}function createCatalogFilter(e){var t=window.store;return new window.Vue({el:e,store:t,computed:Object.assign({},window.Vuex.mapGetters({filters:"catalogfilter/filters",filtersLength:"catalogfilter/filtersLength",isLoading:"catalogfilter/isLoading",requestResponse:"catalogfilter/requestResponse"}),{selectedFilters:function(){var e=this,t=[];return Object.keys(e.filters).filter((function(t){var o=e.filters[t];return Array.isArray(o)})).forEach((function(o){e.filters[o].forEach((function(e){var n=$("#"+e),a=n.closest(".checkbox").find(".custom-control-text").text(),i=n.closest(".dropdown").find(".dropdown__header").text();t.push({key:o,title:i,text:a,id:e})}))})),Object.keys(e.filters).filter((function(t){return e.filters[t].isRange})).forEach((function(o){var n=e.filters[o],a=n.min,i=n.max;if(!a&&!i)return!1;t.push({isRange:!0,min:a,max:i,key:o,id:o})})),t}}),data:{filtersBeforeModal:{}},mounted(){this.init()},methods:{init:function(){this.$store.dispatch("catalogfilter/setFilters",window.getCatalogFilters().data)},deselectFilter:function(e,t){if(t.isRange)this.filters[t.key].min="",this.filters[t.key].max="";else{var o=this.filters[t.key].filter((function(e){return e!==t.id}));this.filters[t.key]=o}this.afterDeselect(t.key)},deselectAllFilters:function(){var e=this,t=Object.keys(e.filters).filter((function(t){var o=e.filters[t];return Array.isArray(o)}));t.forEach((function(t){e.filters[t]=[]})),Object.keys(e.filters).filter((function(t){return e.filters[t].isRange})).forEach((function(t){e.filters[t].min="",e.filters[t].max=""})),this.afterDeselect(t)},afterDeselect:function(e){var o=document.querySelector(".fancybox-is-open .modal--filters");Array.isArray(e)||(e=[e]),o||t.dispatch("catalogfilter/resetRequestResponse"),window.smartFilter&&this.$nextTick((function(){e.forEach((function(e){window.smartFilter.click(document.querySelector(`[data-model="${e}"]`),!o)}))}))},onSubmitClick(){t.dispatch("catalogfilter/setLoading",!0),window.replaceCatalogContent(this.requestResponse.url,(function(){$.fancybox.close(),t.dispatch("catalogfilter/setLoading",!1)}))}}})}function initFilters(){window.store?createFilters():document.addEventListener("store:init",createFilters)}function createFilters(){var e=document.querySelector("#catalog-filters-aside"),t=document.querySelector("#catalog-filters-modal");window.store.dispatch("catalogfilter/setLoading",!1),asideFilter&&asideFilter.$destroy&&asideFilter.$destroy(),modalFilter&&modalFilter.$destroy&&asideFilter.$destroy(),e&&(asideFilter=window.createCatalogFilter(e)),t&&(modalFilter=window.createCatalogFilter(t)),document.dispatchEvent(new Event("catalog-filters:init"))}function onFilterRequestStarted(){window.store.dispatch("catalogfilter/setLoading",!0)}function onFilterRequestCompleted(e){var t=e.detail,o=t.resultsUrl,n=t.foundCount,a=t.checkboxNum,i=t.ranges;(t.instantReload&&replaceCatalogContent(o),window.store.dispatch("catalogfilter/setLoading",n<=0),window.store.dispatch("catalogfilter/setRequestResponse",{count:n,text:`${n} ${declension(n,"товар","товара","товаров")}`,url:o}),a)&&Object.keys(a).forEach((function(e){var t=window.parseInt(a[e]);Array.from(document.querySelectorAll(".num_"+e)).forEach((function(e){var o=e.closest(".checkbox");t<=0?o.classList.add("u-hidden"):o.classList.remove("u-hidden"),e.textContent=t}))}));i&&Object.keys(i).forEach((e=>{Array.from(document.querySelectorAll(`[name="${e}"]`)).forEach((t=>{i.hasOwnProperty(e)&&(t.placeholder=i[e])}))}))}function onBeforeFilterReset(){window.store.dispatch("catalogfilter/resetRequestResponse")}function checkNumbersVisibility(){if(!document.querySelector("#catalog-filters-modal"))return!1;Array.from(document.querySelectorAll(".checkbox__amount")).forEach((function(e){var t=e.closest(".checkbox");window.parseInt(e.textContent)<=0?t.classList.add("u-hidden"):t.classList.remove("u-hidden")}))}function declension(e,t,o,n){var a=e;return a=Math.abs(a),(a%=100)>=5&&a<=20?n:1===(a%=10)?t:a>=2&&a<=4?o:n}function replaceCatalogContent(e,t){if(e){window.isReplacingCatalog=!0;loadAndReplace(e,".catalog__count",(function(){loadAndReplace(e,".catalog__items-wrapper",(function(){document.dispatchEvent(new Event("catalog:contentReplaced")),t&&t(),window.isReplacingCatalog=!1}))}))}}function loadAndReplace(e,t,o=null,n=!0){$.ajax({url:e,headers:{"X-Requested-With":"load-and-replace",Accept:"text/html, application/xhtml+xml"},success:function(a){var i=document.createElement("div");if(i.innerHTML=a,n){var r=i.querySelector("title"),s=document.title;r&&(s=r.textContent),window.history.pushState({url:e,random:Math.random(),source:"swup"},s,e),document.title=s}var c=i.querySelector(t),d=document.querySelector(t);if(!d&&c){let e="body",t=c.parentElement;t.id&&(e="#"+t.id);let o=document.querySelector(e);o&&(d=document.createElement("div"),o.insertAdjacentElement("afterbegin",d))}i.querySelector(t)||(c=""),d.replaceWith(c),o&&o()}})}function beforeModalShow(e,t){if("#modalFilters"!==t.current.src)return!1;modalFilter.filtersBeforeModal=Object.assign({},modalFilter.filters)}function beforeModalClose(e,t){if("#modalFilters"!==t.current.src||window.isReplacingCatalog)return!1;window.store.dispatch("catalogfilter/setFilters",Object.assign({},modalFilter.filtersBeforeModal))}function getCatalogFilters(){var e={};return $("[data-catalog-filter]").each((function(t,o){var n=o.dataset.catalogFilter;if(o.dataset.filterBool){var a=o.querySelector('input:checked[type="radio"]');e[n]=a?a.value:""}else if(o.dataset.filterRange){var i=o.dataset.valueMin,r=o.dataset.valueMax;e[n]={min:i||"",max:r||"",isRange:!0}}else{e[n]=[],Array.from(o.querySelectorAll(`[data-model=${n}]`)).forEach((function(t){t.checked&&e[n].push(t.id)}))}})),{data:e,keys:Object.keys(e)}}$(window).on("resize",checkPositionSlider),document.addEventListener("pageLoaded",checkPositionSlider),document.addEventListener("pageLoaded",initCartOverall),window.addEventListener("resize",initCartOverall),document.addEventListener("pageLoaded",initCatalogSort),window.createCatalogFilter=createCatalogFilter,document.addEventListener("onFilterRequestStarted",onFilterRequestStarted),document.addEventListener("onFilterRequestCompleted",onFilterRequestCompleted),document.addEventListener("onBeforeFilterReset",onBeforeFilterReset),document.addEventListener("pageLoaded",initFilters),document.addEventListener("pageLoaded",checkNumbersVisibility),$(document).on("beforeShow.fb",beforeModalShow),$(document).on("beforeClose.fb",beforeModalClose),window.getCatalogFilters=getCatalogFilters,window.catalogFiltersStore={namespaced:!0,state:{filters:{},isLoading:!1,requestResponse:{url:"",text:"",count:0}},getters:{requestResponse:function(e){return e.requestResponse},isLoading:function(e){return e.isLoading},filters:function(e){return e.filters},filtersLength:function(e){var t=window.getCatalogFilters().keys;let o=0;return t.forEach((function(t){var n=e.filters[t];Array.isArray(n)&&(o+=n.length)})),o}},mutations:{setRequestResponse:function(e,t){e.requestResponse={...t}},setLoading:function(e,t){e.isLoading=t},setFilters:function(e,t){e.filters=Object.assign({},e.filters,t)}},actions:{setRequestResponse(e,t){e.commit("setRequestResponse",t)},resetRequestResponse(e){e.commit("setRequestResponse",{})},setFilters(e,t){e.commit("setFilters",t)},setLoading(e,t){e.commit("setLoading",t)}}};var settings_slider_clist={dots:!0,arrows:!1,infinite:!1,slidesToShow:1,slidesToScroll:1},callbacksClist=[];function initClist(){$(".catalog-list--mobile").length&&($slick_slider=$(".catalog-list--mobile"),handleSlickClist($slick_slider,settings_slider_clist))}function handleSlickClist(e,t){var o=function(){if(!($(window).width()>767))return e.hasClass("slick-initialized")?void 0:e.slick(t);e.hasClass("slick-initialized")&&e.slick("unslick")};"interactive"===document.readyState?($(window).on("load resize",o),callbacksClist.push(o)):($(window).on("resize",o),callbacksClist.push(o),o())}document.addEventListener("pageLoaded",(function(){callbacksClist.forEach((function(e){$(window).off("load resize",e)})),callbacksClist=[],initClist()}));var settings_slider_cpage={dots:!0,arrows:!0,infinite:!1,slidesToShow:3,slidesToScroll:1},callbacksCPage=[];function initCPage(){$(".catalog-page__sections-list").length&&($slick_slider=$(".catalog-page__sections-list"),handleSlickCPage($slick_slider,settings_slider_cpage))}function handleSlickCPage(e,t){var o=function(){if(!($(window).width()>767))return e.hasClass("slick-initialized")?void 0:e.slick(t);e.hasClass("slick-initialized")&&e.slick("unslick")};"interactive"===document.readyState?($(window).on("load resize",o),callbacksCPage.push(o)):($(window).on("resize",o),callbacksCPage.push(o),o())}function initCompareHover(){var e=$(".compare__specs-row");e.on("mouseenter",(function(e){var t=$(this).data("index");$(this).parents(".compare__specs-row-wrap").siblings(".compare__specs-row-wrap").find('[data-index="'+t+'"]').addClass("is-hover")})),e.on("mouseleave",(function(e){var t=$(this).data("index");$(this).parents(".compare__specs-row-wrap").siblings(".compare__specs-row-wrap").find('[data-index="'+t+'"]').removeClass("is-hover")}));$(".compare").waypoint({handler:function(e){"down"===e?$(".compare__top").addClass("is-sticky"):"up"===e&&$(".compare__top").removeClass("is-sticky")},offset:30})}function resizeEqualHeight(){if($(window).width()>767){let e=$(".compare__specs-row-wrap").length,t=[];for(let o=0;o<e;o++)$(`.compare__specs-row-wrap:nth-child(${o+1}) > .compare__specs-row`).each(((e,o)=>{t[e]=o.offsetHeight>(t[e]||0)?o.offsetHeight:t[e]}));for(let o=0;o<e;o++)$(`.compare__specs-row-wrap:nth-child(${o+1}) > .compare__specs-row`).each(((e,o)=>{o.style.height=t[e]+"px"}))}}document.addEventListener("pageLoaded",(function(){callbacksCPage.forEach((function(e){$(window).off("load resize",e)})),callbacksCPage=[],initCPage()})),document.addEventListener("pageLoaded",initCompareHover),document.addEventListener("pageLoaded",resizeEqualHeight),window.addEventListener("resize",resizeEqualHeight);var callbacksCompSlider=[],compare_settings_slider={dots:!1,arrows:!0,infinite:!1,slidesToShow:2,slidesToScroll:2,prevArrow:".compare__slider-arrow--prev",nextArrow:".compare__slider-arrow--next",asNavFor:$(".compare__specs-right, .compare__slider-select")};function initCompSlider(){compare_slick_on_mobile($(".compare__items-row"),compare_settings_slider,callbacksCompSlider)}var callbacksCompSelect=[],compare_select_settings_slider={dots:!1,arrows:!1,infinite:!1,slidesToShow:2,slidesToScroll:2,asNavFor:$(".compare__items-row, .compare__specs-right")};function initCompareSelect(){compare_slick_on_mobile($(".compare__slider-select"),compare_select_settings_slider,callbacksCompSelect)}var callbacksCompSpecs=[],compare_specs_settings_slider={dots:!1,arrows:!1,infinite:!1,slidesToShow:2,slidesToScroll:2,asNavFor:$(".compare__items-row, .compare__slider-select")};function initCompSpecs(){compare_slick_on_mobile($(".compare__specs-right"),compare_specs_settings_slider,callbacksCompSpecs)}function handleCompares(){callbacksCompSlider.forEach((function(e){$(window).off("load resize",e)})),callbacksCompSlider=[],initCompSlider(),callbacksCompSelect.forEach((function(e){$(window).off("load resize",e)})),callbacksCompSelect=[],initCompareSelect(),callbacksCompSpecs.forEach((function(e){$(window).off("load resize",e)})),callbacksCompSpecs=[],initCompSpecs()}function compare_slick_on_mobile(e,t,o){var n=function(){if(!($(window).width()>767))return e.hasClass("slick-initialized")?void 0:e.slick(t);e.hasClass("slick-initialized")&&e.slick("unslick")};"interactive"===document.readyState?($(window).on("load resize",n),o.push(n)):($(window).on("resize",n),o.push(n),n())}function handleCompareChange(){$(".compare__items-row").on("init reInit afterChange",(function(e,t,o,n){var a=(o||0)+1,i=t.slickGetOption("slidesToShow"),r=parseInt((a-1)/i)+1,s=parseInt((t.slideCount-1)/i)+1;$(".compare__slider-info--current").text(r),$(".compare__slider-info--all").text(s)}))}function handleDrag(){if($(".drag").length){var e,t,o=document.querySelector(".drag"),n=!1;o.addEventListener("mousedown",(function(a){n=!0,e=a.pageX-o.offsetLeft,t=o.scrollLeft})),o.addEventListener("mouseleave",(function(){n=!1})),o.addEventListener("mouseup",(function(){n=!1})),o.addEventListener("mousemove",(function(a){if(n){a.preventDefault();var i=3*(a.pageX-o.offsetLeft-e);o.scrollLeft=t-i}}))}}function initDropdown(){$(document).on("click",".dropdown__header",(function(e){e.preventDefault();var t=$(this),o=t.parents(".modal__filters");o.length>0&&(o.find(".dropdown__header").removeClass("active"),o.find(".dropdown__content").slideUp(300)),t.toggleClass("active"),t.siblings(".dropdown__content").slideToggle(300)}))}function handleFooter(){$(document).on("click",".footer__sitemap-header",(function(e){if($(window).width()>=768)return!1;e.preventDefault(),$(this).hasClass("active")?($(this).removeClass("active"),$(this).siblings(".footer__sitemap-content").slideUp(300)):($(this).addClass("active"),$(this).siblings(".footer__sitemap-content").slideDown(300))}))}function handleFront(){$(".front__slider").length&&$(".front__slider").slick({dots:!1,arrows:!0,infinite:!1,slidesToShow:3,slidesToScroll:1,responsive:[{breakpoint:767,settings:{slidesToShow:2,slidesToScroll:1}},{breakpoint:576,settings:{slidesToShow:1,slidesToScroll:1}}]})}function handleGallery(){$(".gallery__slider").slick({slidesToShow:1,slidesToScroll:1,arrows:!1,fade:!0,asNavFor:".gallery__nav",responsive:[{breakpoint:576,settings:{asNavFor:null,dots:!0}}]}),$(".gallery__nav").slick({slidesToShow:3,slidesToScroll:1,asNavFor:".gallery__slider",arrows:!1,variableWidth:!0,focusOnSelect:!0,responsive:[{breakpoint:576,settings:{asNavFor:null}}]})}document.addEventListener("pageLoaded",handleCompares),document.addEventListener("pageLoaded",handleCompareChange),document.addEventListener("pageLoaded",handleDrag),document.addEventListener("DOMContentLoaded",initDropdown),document.addEventListener("DOMContentLoaded",handleFooter),document.addEventListener("pageLoaded",handleFront),document.addEventListener("pageLoaded",handleGallery),$(window).on("load scroll",(function(){window.innerWidth<1200||$(this).scrollTop()<=1?($(".header").removeClass("is-fixed"),$(".menu__catalog-content").removeClass("is-fixed")):($(".header").addClass("is-fixed"),$(".menu__catalog-content").addClass("is-fixed"))})),document.addEventListener("pageLoaded",(function(){var e=$("[data-header-classlist]");e.length<=0?$(".header").removeClass("header--white header--border-bottom"):($(".header").removeClass("header--white header--border-bottom"),$(".header").addClass(e.data().headerClasslist)),$.ajax({url:"/ajax/compare/list_compare.php?action=getlist",complete:function(e){var t=e;($(".js__compare_count").text(t.length),t.length)&&($(".header__controls-item-compare").removeClass("header__controls-item-compare--empty"),$(".js-header-compare-btn a.header__btn")[0].href="/catalog/compare/")}}),$.ajax({url:"/ajax/whishlist/whishlist.php",complete:function(e){var t=e.responseJSON;$(".js__wish_count").text(t.length),t.length&&$(".header__controls-item-wish").removeClass("header__controls-item-wish--empty")}}),document.addEventListener("basket:onchange",(function(e){var t=0,o=Object.keys(e.detail.products_count);if(Object.keys(e.detail.product_fields).length)for(var n=0;n<o.length;n++)t+=e.detail.products_count[o[n]];t?$(".header__controls-item-cart").removeClass("header__controls-item-cart--empty"):$(".header__controls-item-cart").addClass("header__controls-item-cart--empty")}))})),document.addEventListener("DOMContentLoaded",(function(){$(".js-header-compare-btn")[0].addEventListener("click",(function(e){!e.currentTarget.classList.contains("controls-modal")?e.currentTarget.classList.add("controls-modal"):e.currentTarget.classList.remove("controls-modal")})),$(".js-header-wish-btn")[0].addEventListener("click",(function(e){!e.currentTarget.classList.contains("controls-modal")?e.currentTarget.classList.add("controls-modal"):e.currentTarget.classList.remove("controls-modal")}))}));var closePopupTimer,phoneCodes=null;function loadPhoneCodes(){return $.masksSort($.masksLoad("/assets/json/phone-codes.json"),["#"],/[0-9]|#/,"mask")}function initMaskPhone(){var e=phoneCodes||loadPhoneCodes();phoneCodes=e;var t={inputmask:{definitions:{"#":{validator:"[0-9]",cardinality:1}},showMaskOnHover:!1,autoUnmask:!0},match:/[0-9]/,replace:"#",list:e,listKey:"mask",onMaskChange:function(e,t){$(this).attr("placeholder",$(this).inputmask("getemptymask"));var o=this,n=!1;o.classList.remove("input--invalid"),"7"==o.value[0]&&11===o.value.length&&(n=!0),n?delete o.dataset.invalid:o.dataset.invalid=""}};$(".js-mask-phone").inputmasks(t)}function initMaskEmail(){$(".js-mask-email").each((function(e,t){t.inputmask||$(t).inputmask({alias:"email",postValidation:function(){var e=!1,o=!1;t.classList.remove("input--invalid");for(var n=0;n<t.value.length;n++)"@"===t.value[n]&&n>0&&(e=!0),"."===t.value[n]&&n<t.value.length-2&&(o=!0);return e&&o?delete t.dataset.invalid:t.dataset.invalid="",!0}})}))}function initMarksDropdown(){function e(){$(".catalog-compare__dropdown").fadeOut(300),$(".catalog-compare__overflow").fadeOut(300)}$(".js__compare").on("click",(function(e){e.preventDefault();var t=$(`.item[data-product-id=${e.currentTarget.dataset.productId}]`);t[0].classList.contains("js__compare--compared")&&(t.find(".catalog-compare__dropdown").fadeIn(300),t.find(".catalog-compare__overflow").fadeIn(300))})),$(".catalog-compare__overflow").on("click",e),$(".js__compare--remove").on("click",e)}function initItemsCompareMarks(){if(document.querySelector(".item")){for(var e=[],t=$(".js__compare"),o=$(".js__compare--remove"),n=0;n<t.length;n++)t[n].addEventListener("click",(function(e){e.preventDefault(),!!$(`.js__compare--compared[data-product-id=${e.currentTarget.dataset.productId}]`).length||i(e.currentTarget.dataset.productId)}));for(n=0;n<o.length;n++)o[n].addEventListener("click",(function(e){e.preventDefault(),!!$(`.js__compare[data-product-id=${e.currentTarget.dataset.productId}]`).length&&r(e.currentTarget.dataset.productId)}));$.ajax({url:"/ajax/compare/list_compare.php?action=getlist",complete:t=>{e=t.responseJSON.COMPARE_LIST,a()}})}function a(){for(var t=$(".item"),o=0;o<t.length;o++)$(".item")[o].classList.remove("js__compare--compared"),$(".item")[o].classList.remove("item--compared");for(var o in e){var n=$(`.item[data-product-id=${e[o]}]`);n.length&&(n.addClass("js__compare--compared"),n.addClass("item--compared"),n.find(".item__compare-status")[0].innerText=e.length)}$(".js__compare_count").text(e.length),e.length?($(".header__controls-item-compare").removeClass("header__controls-item-compare--empty"),$(".js-header-compare-btn a.header__btn")[0].href="/catalog/compare/"):($(".header__controls-item-compare").addClass("header__controls-item-compare--empty"),$(".js-header-compare-btn a.header__btn")[0].removeAttribute("href"))}function i(t){var o;$.ajax({url:"/ajax/compare/list_compare.php",type:"post",data:{id:t,ajax_action:"Y",action:"add"},dataType:"json",success:function(n){"OK"===n.STATUS?(e.push(t),a(),o=new CustomEvent("comparison:add-success",{detail:{message:n.MESSAGE}}),document.dispatchEvent(o)):(o=new CustomEvent("comparison:add-error",{detail:{message:n.MESSAGE}}),document.dispatchEvent(o))},error:function(){o=new CustomEvent("comparison:add-error",{detail:{message:"Internal Server Error"}}),document.dispatchEvent(o)},complete:function(e){return e.MESSAGE}})}function r(t){var o;$.ajax({url:"/catalog/compare/?action=DELETE_FROM_COMPARE_RESULT&ID="+t,type:"get",complete:function(n){if(200===n.status){for(var i=0;i<e.length;i++)e[i]==t&&e.splice(i,1);a(),o=new CustomEvent("comparison:add-success",{detail:{message:"Товар удалён из сравнения"}}),document.dispatchEvent(o)}else o=new CustomEvent("comparison:add-error",{detail:{message:"Ошибка удаления"}}),document.dispatchEvent(o)}})}}function initFavoriteMarks(){if(document.querySelector(".item")){var e=[],t=document.querySelectorAll(".item__control-favorite"),o=document.querySelector(".header__controls-item-wish a.header__btn").href;$.ajax({url:"/ajax/whishlist/whishlist.php",success:t=>{e=t||[],a()}});for(var n=0;n<t.length;n++)t[n].addEventListener("click",(function(t){var o,n;t.currentTarget.classList.contains("item__control-favorite--added")?(o=t.currentTarget.dataset.productId,$.ajax({url:"/ajax/sale/basket/",type:"post",data:{action:"remove",id:o},dataType:"json",success:function(t){if("OK"===t.STATUS){for(var i=0;i<e.length;i++)e[i]===o&&e.splice(i,1);a(),n=new CustomEvent("favourites:del-success",{detail:{message:"Товар успешно удален из избранного"}}),document.dispatchEvent(n)}else n=new CustomEvent("favourites:del-error",{}),document.dispatchEvent(n)},error:function(){n=new CustomEvent("favourites:del-error",{detail:{message:"Internal Server Error"}}),document.dispatchEvent(n)}})):t.currentTarget.classList.contains("item__control-favorite--not-added")&&i(t.currentTarget.dataset.productId)}))}function a(){$(".js__wish_count").text(e.length),e.length?($(".header__controls-item-wish").removeClass("header__controls-item-wish--empty"),$(".js-header-wish-btn a.header__btn")[0].href=o):($(".header__controls-item-wish").addClass("header__controls-item-wish--empty"),$(".js-header-wish-btn a.header__btn")[0].removeAttribute("href"));for(var n=0;n<t.length;n++){t[n].classList.add("item__control-favorite--not-added"),t[n].classList.remove("item__control-favorite--added");for(var a=0;a<e.length;a++)e[a]===t[n].dataset.productId&&(t[n].classList.remove("item__control-favorite--not-added"),t[n].classList.add("item__control-favorite--added"))}}function i(t){var o;$.ajax({url:"/ajax/sale/basket/",type:"post",data:{action:"increase",id:t,delay:"Y"},dataType:"json",success:function(n){"OK"===n.STATUS?(e.push(t),a(),o=new CustomEvent("favourites:add-success",{detail:{message:"Товар успешно добавлен в избранное"}}),document.dispatchEvent(o)):(o=new CustomEvent("favourites:add-error",{}),document.dispatchEvent(o))},error:function(){o=new CustomEvent("favourites:add-error",{detail:{message:"Internal Server Error"}}),document.dispatchEvent(o)}})}}function dispatch(e){document.dispatchEvent(new Event(e))}function loadScript(e,t){var o=document.createElement("script");o.onload=t,o.async=!0,o.src=e,document.body.appendChild(o)}function loadPackage(e,t){var o=document.querySelector(e);if(o){var n=o.dataset.src;if(!n)return!1;window[t]?dispatch(t+":init"):loadScript(n,(function(){dispatch(t+":init")}))}else dispatch(t+":destroy")}function initMap(){$("#map").length&&ymaps.ready((function(){moveStyles();var e=new ymaps.Map("map",{center:[59.927572,30.358287],zoom:16,controls:[]}),t=new ymaps.Placemark(e.getCenter(),null,{iconLayout:"default#image",iconImageHref:"/assets/img/marker.svg",iconImageSize:[40,46],iconContentOffset:[33,7],zIndex:900});e.controls.remove("zoomControl"),e.controls.remove("fullscreenControl"),e.controls.remove("typeSelector"),e.controls.remove("routeButtonControl"),e.controls.remove("trafficControl"),e.controls.remove("rulerControl"),e.geoObjects.add(t)}))}function moveStyles(){var e=$('[data-ymaps="css-modules"]'),t=document.body;e.each((function(e,o){t.appendChild(o)}))}function initCatalogMenu(){var e=createCatalogMenu(document.querySelector("#catalog-menu"));loadMenu().then((function(t){var o=t.data;e.list=o}))}function createCatalogMenu(e){return new window.Vue({el:e,computed:{treeList:function(){return flatToTree(this.list)},filteredList:function(){return filterByName(this.treeList,this.search)}},data:{list:[],search:"",listSearch:"",activeCategory:-1,hoverTimer:!1},mounted(){this.initPerfectScrollbar()},methods:{filterList:(e,t)=>filterByName(e,t),initPerfectScrollbar(){this.$nextTick(initPerfectScrollbar)},onBackClick(){this.listSearch="",window.catalogSectionClose()},onSectionBtnClick(e){var t=e.target;$(window).width()<1200?window.catalogSectionToggle(e,t):window.location=t.href},onMouseover(e){window.clearTimeout(this.hoverTimer);var t=this;this.hoverTimer=setTimeout((function(){t.activeCategory=e}),200)}}})}function loadMenu(){return new Promise((function(e){var t=window.BX?"/ajax/menu/catalog/get.php":"https://run.mocky.io/v3/dd8ba982-9696-4cc0-970b-b95df93179e2";$.ajax(t,{success:function(t){e(t)}})}))}function filterByName(e,t){return""===t?e:e.filter((function(e){var o=e.name.toLowerCase(),n=t.toLowerCase();return o.includes(n)}))}function flatToTree(e){var t=[],o={};let n,a;for(let t=0,a=e.length;t<a;t++)n=e[t],o[n.path]=n,o[n.path].list=[];for(var i in o)o.hasOwnProperty(i)&&(a=o[i],a.parentPath?o[a.parentPath].list.push(a):(a.root=!0,t.push(a)));return t}function initPerfectScrollbar(){var e={wheelSpeed:.5,wheelPropagation:!1};new PerfectScrollbar(".menu__catalog-content",e);$(".menu__catalog-section-content").each((function(){new PerfectScrollbar($(this)[0],e)}));var t=$(".menu__catalog-content"),o=$(".menu__catalog-bg");t[0].addEventListener("ps-scroll-y",(function(){window.innerWidth>=1200&&o.css({top:t[0].scrollTop})}))}function missClick(e,t){let o=$(e);return!o.is(t.target)&&0===o.has(t.target).length}function catalogToggle(){$("#catalog-menu").hasClass("is-show")?catalogClose():catalogOpen()}function catalogMobToggle(){$("#catalog-mob").toggleClass("is-show")}function catalogClose(){var e=$("#catalog-menu");e.removeClass("is-show"),$(window).width()>=1200&&setTimeout((function(){e.hide()}),800)}function catalogOpen(){var e=$("#catalog-menu");$(window).width()>=1200&&e.show(),setTimeout((function(){e.addClass("is-show")}),0)}function catalogSectionToggle(e,t){if($(window).width()<1200){let o=$(t).next(".menu__catalog-section-content");e.preventDefault(),o.addClass("is-show")}}function closeAllMenu(){$(window).width()<1200&&($("#catalog-menu").removeClass("is-show"),$("#catalog-mob").removeClass("is-show"))}function catalogSectionClose(){$(".menu__catalog-section-content").removeClass("is-show")}function checkTopModalsAfterShow(e){["modal--top"].some((t=>e.hasClass(t)))&&e.addClass("modal--visible")}function checkBotModalsAfterShow(e){["modal--bottom"].some((t=>e.hasClass(t)))&&e.addClass("modal--visible")}function checkSideModalsAfterShow(e){var t=["modal--left","modal--right","modal--right-narrow"];if(t.some((t=>e.hasClass(t)))){var o=t.find((t=>e.hasClass(t)));$(".page-content").addClass("modal-active-"+o.split("--")[1]),e.addClass("modal--visible")}}function isMobileDevice(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t}function isMobileSafari(){var e=window.navigator.userAgent,t=!!e.match(/iP(ad|hone)/i),o=!!e.match(/WebKit/i);return t&&o&&!/(Chrome|CriOS|OPiOS)/.test(e)}function isSafari(){return-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome")&&!isMobileDevice()}function initCitySelect(){var e=document.querySelector(".modal__city-form .bx-ui-sls-route"),t=(e.value,document.querySelector(".bx-ui-sls-fake")),o="Санкт-Петербург";function n(){""===e.value?(document.querySelector(".js__geo_city").innerText=o,t.value=""):(document.querySelector(".js__geo_city").innerText=t.value,o=t.value)}document.querySelector(".header__city").addEventListener("click",(function(){var o=document.querySelector(".modal__city-form .bx-ui-sls-variants");e.value="",t.value="",t.classList.add("modal__city-input"),o.classList.add("modal__city-list")})),window.addEventListener("mouseup",(function(e){(e.target.classList.contains("modal__close")||e.target.classList.contains("fancybox-slide"))&&n()})),window.addEventListener("click",(function(o){var a=e.value;if(!!$.fancybox.getInstance().current&&void 0!==o.path)for(var i=0;i<o.path.length;i++){if(o.path[i]===document)return;if(o.path[i].classList.contains("dropdown-item"))return n(),$.fancybox.close(),void a;if(o.path[i].classList.contains("quick-location-tag")){var r=setInterval((function(){t.value&&(document.querySelector(".js__geo_city").innerText=t.value,$.fancybox.close(),clearInterval(r))}),200);return}}})),document.querySelector(".modal__city-geo").addEventListener("mouseup",(function(){navigator.geolocation.getCurrentPosition((function(e){$.ajax({url:"/ajax/geo/?latitude="+e.coords.latitude+"&longitude="+e.coords.longitude,type:"get",success:function(e){var t=document.querySelector(".bx-ui-sls-fake"),o=new Event("change");t.value=e,t.dispatchEvent(o)},error:function(){var e=document.querySelector(".modal__city-geo-error");e.style.opacity=1,setTimeout((function(){e.style.opacity=0}),3e3)}})}),(function(e){1===e.code?alert("Разрешите определение местоположения"):2===e.code?alert("Не удалось определить местоположение"):3===e.code&&alert("Время вышло, попробуйте снова")}))}))}function initLostPassRequest(){var e=document.querySelector(".modal__form-lost-password"),t=document.querySelector(".modal__form-lost-password .input"),o=document.querySelector(".modal__form-lost-password .send-btn");e&&(t.addEventListener("input",(function(e){void 0!==e.currentTarget.dataset.invalid?o.disabled=!0:o.disabled=!1})),e.addEventListener("submit",(function(e){e.preventDefault(),console.log(t.value),BX.ajax({url:"/ajax/auth/forgotPass/",method:"post",dataType:"json",data:{USER_EMAIL:t.value,USER_LOGIN:t.value,AUTH_ACTION:"Y"},onsuccess:function(e){console.log(e),e.success?document.dispatchEvent(new CustomEvent("onSuccessFormSubmit",{detail:{message:"Вам отправлена ссылка для восстановления пароля"}})):document.dispatchEvent(new CustomEvent("onErrorFormSubmit",{detail:{message:e.message}}))},onfailure:function(){console.log("Internal Server Error")}})})))}function initSwitchReceiptProductAgree(){var e=document.querySelector("#switch-receipt-product-agree"),t=document.querySelector("#product-receipt-submit-btn");e&&(e.checked||(t.disabled=!0),e.addEventListener("change",(function(){e.checked?t.disabled=!1:t.disabled=!0})))}function initEmailCopy(){var e=document.querySelector(".modal__contacts-info-item--email");if(e){var t=e.querySelector(".contact-link"),o=e.querySelector(".modal__contacts-copy");t.addEventListener("click",(function(e){e.preventDefault()})),o.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation();var o=document.createRange();o.selectNode(t);var n=window.getSelection();n.removeAllRanges(),n.addRange(o),document.execCommand("copy")}))}}function handleOption(){$(".option .custom-control-input").on("change",(function(e){$(this).is(":checked")&&($(this).parents(".order__section").find(".option").removeClass("is-checked"),$(this).parents(".option").addClass("is-checked"))}))}function handleOrderItem(){$(".order-item__right").on("click",(function(e){if(e.preventDefault(),$(this).parent().parent().find(".order-item__content").slideToggle(300),$(this).parent().toggleClass("is-active"),$(window).width()>767){var t=$(".cart-item__final-price");if(t.length){var o=0;t.each((function(){var e=$(this).outerWidth();e>o&&(o=e)})),t.width(o)}}}))}function handleOverallMobile(){if($(window).width()<768&&!$(".overall--no-border").length)$(".overall").waypoint({handler:function(e){"down"===e?($(".overall__mobile").slideUp(300),$(".overall__mobile-overflow").fadeOut(300),$(".overall__mobile").removeClass("is-active")):"up"===e&&$(".overall__mobile").slideDown(300)},offset:"100%"})}function handleOverallClick(){$(".overall__expand-link").on("click",(function(e){e.preventDefault(),$(".overall__mobile-overflow").fadeToggle(300),$(this).parent().toggleClass("is-active")}))}function handlePictureBtn(){$(document).on("click",".picture__btn",(function(e){e.preventDefault(),$(this).closest(".picture").find(".picture__dscr").fadeToggle("fast")}))}function openPopup(e){var t=e.title,o=e.text,n=e.img,a=e.button;clearTimeout(closePopupTimer),setTimeout(closePopup,2e3),t&&$(".popup__content-title").html(t),o&&$(".popup__content-dscr").html(o),n&&$(".popup__icon-img").attr("src",n);var i=$(".popup__content-btn");if(!a)return i.hide(),$(".popup").addClass("popup--active"),!1;a.modal?(i.text(a.text),i.show(),i[0].onclick=function(e){e.preventDefault(),showModal(a.id)}):a.href&&(i[0].onclick=function(){setTimeout(closePopup,10)},i.text(a.text),i.attr("href",a.href),i.attr("target",a.target||"_blank"),i.show()),$(".popup").addClass("popup--active")}function closePopup(){$(".popup").removeClass("popup--active"),closePopupTimer=setTimeout((function(){$(".popup__content-btn")[0].onclick="",$(".popup__content-btn").hide(),$(".popup__content-title").html(""),$(".popup__content-dscr").html(""),$(".popup__icon-img").attr("src","")}),600)}function showModal(e){if(!e)return!1;$.fancybox.open({src:e,modal:!0})}function initAnimations(){var e=$("body"),t=$(".preloader__bg"),o=$(".preloader__img"),n=$(".front")[0],a=n.offsetHeight/window.innerHeight,i=n.offsetTop;animateLogo(),animateHeader(),t.css({transform:`translateY(${i}px) scaleY(${a})`,opacity:0}),setTimeout((function(){t.hide(),e.removeClass("preload"),o.removeClass("preloader__img--pulse")}),1400)}function animateLogo(){var e=$(".preloader__img"),t=$(".header__bottom")[0].getBoundingClientRect(),o=e[0].getBoundingClientRect(),n=(t.height-o.height)/2;e.removeClass("preloader__img--pulse"),setTimeout((function(){e.addClass("preloader__img--trs"),e.css({transform:`translate(-50%, ${n}px)`})}),125)}function animateHeader(){var e=$(".header__city, .header__phone, .header__top-menu"),t=$(".header__bottom, .header__top-line, .header");e.css({transform:"translateY(0px)",opacity:1}),t.css({opacity:1})}function handleProfile(){$(document).on("click",".profile__menu-link--active",(function(e){e.preventDefault(),$(this).hasClass("active")?($(this).removeClass("active"),$(this).siblings(".profile__menu-wrap").slideUp(300)):($(this).addClass("active"),$(this).siblings(".profile__menu-wrap").slideDown(300))})),$(document).on("click","#change-password",(function(e){e.preventDefault(),$(this).hide(),$(".profile__info-password-content").slideDown(300)}))}function handlePromo(){var e=$(".promo.slick-slide"),t=$(".preloader").length>0?800:0;setTimeout((function(){e.css({opacity:1})}),t)}function handleQuestion(){$(document).on("click",".question__title",(function(e){e.preventDefault(),$(this).hasClass("active")?($(this).removeClass("active"),$(this).siblings(".question__content").slideUp(300)):($(".question__title").removeClass("active"),$(".question__content").slideUp(300),$(this).addClass("active"),$(this).siblings(".question__content").slideDown(300))}))}function searchToggle(e){searchPosition().fadeToggle("fast").find("input").focus(),$(".header").toggleClass("header--search-active")}function searchPosition(){let e=$("#menu").outerWidth(),t=$("#catalog-btn").outerWidth(),o=$("#search-header");return $(window).width()>1199?o.outerWidth(e-t).css("left",t+"px"):o.css("width","100%"),o}function handleSelect(){$(".select").length&&($(".select__input").prepend("<option selected></option>").select2({minimumResultsForSearch:-1,width:"100%",escapeMarkup:function(e){return e}}),$(".select__input:not(.without-reload)").on("change",(function(){window.location.search="?SECTION_ID="+this.value})))}function initSlider(){$(".slider").each((function(e,t){var o=$(t);o.hasClass("slick-initialized")||o.slick({dots:!1,arrows:!0,infinite:!1,slidesToShow:4,slidesToScroll:1,variableWidth:!0,responsive:[{breakpoint:767,settings:{slidesToShow:2,slidesToScroll:1}},{breakpoint:576,settings:{slidesToShow:1,slidesToScroll:1}}]})}))}function copyToClipboard(e){var t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}document.addEventListener("pageLoaded",(function(){initMaskPhone(),initMaskEmail()})),document.addEventListener("pageLoaded",initItemsCompareMarks),document.addEventListener("onPagenContentLoaded",initItemsCompareMarks),document.addEventListener("pageLoaded",initFavoriteMarks),document.addEventListener("onPagenContentLoaded",initFavoriteMarks),document.addEventListener("pageLoaded",initMarksDropdown),document.addEventListener("onPagenContentLoaded",initMarksDropdown),document.addEventListener("pageLoaded",(function(){if(document.querySelector(".tab-catalog-items"))var e=window.setInterval((function(){document.querySelector("#slider-latest .item")&&document.querySelector("#slider-similar .item")&&(initItemsCompareMarks(),initFavoriteMarks(),initMarksDropdown(),window.clearInterval(e))}),200)})),document.addEventListener("pageLoaded",(function(){loadPackage("#vue-script","Vue"),loadPackage("#vuex-script","Vuex")})),initMap(),document.addEventListener("Vue:init",initCatalogMenu),$(document).on("click",(function(e){missClick("#catalog-menu,#catalog-btn",e)&&catalogClose()})),jQuery(document).ready((function(e){var t=e(".modal__address-btn--find"),o=e(".modal__address-btn--map"),n=e(".modal__address-content-item"),a=e(".modal__contacts-tab--contacts"),i=e(".modal__contacts-tab--office"),r=e(".modal__contacts-left"),s=e(".modal__contacts-right");t.on("click",(function(t){t.preventDefault(),e(this).hide(),o.css({display:"flex"}),n.removeClass("modal__address-content-item--active"),e(".modal__address-content-item--find").addClass("modal__address-content-item--active")})),o.on("click",(function(o){o.preventDefault(),e(this).hide(),t.css({display:"flex"}),n.removeClass("modal__address-content-item--active"),e(".modal__address-content-item--map").addClass("modal__address-content-item--active")})),a.on("click",(function(e){e.preventDefault(),i.removeClass("modal__contacts-tab--active"),a.addClass("modal__contacts-tab--active"),s.hide(),r.show()})),i.on("click",(function(e){e.preventDefault(),a.removeClass("modal__contacts-tab--active"),i.addClass("modal__contacts-tab--active"),s.show(),r.hide()})),e("body").on("click",(function(t){var o=e(t.target).is(".modal"),n=e(t.target).closest(".modal").length,a=!!e.fancybox.getInstance().current,i=t.target.id.includes("arrFilter"),r=t.target.className.includes("modal__filter"),s=t.target.className.includes("popup__content-btn");o||n||!a||i||r||s||e.fancybox.close()}))})),jQuery(document).ready((function(e){(isSafari()||isMobileSafari())&&e("html").addClass("is-safari");var t=!1,o=!1,n=!1;e(document).on("afterShow.fb",(function(e,t,o){var n=o.$content;checkTopModalsAfterShow(n),checkBotModalsAfterShow(n),checkSideModalsAfterShow(n)})),e.fancybox.defaults.beforeClose=function(a,i){var r=i.$content,s=["modal--left","modal--right","modal--right-narrow"],c=s.some((e=>r.hasClass(e)));if(c&&!t){t=!0;var d=s.find((e=>r.hasClass(e)));return e(".page-content").removeClass("modal-active-"+d.split("--")[1]),r.removeClass("modal--visible"),setTimeout((function(){e.fancybox.close(),t=!1}),800),!1}return(c=(s=["modal--top"]).some((e=>r.hasClass(e))))&&!o?(o=!0,r.removeClass("modal--visible"),setTimeout((function(){e.fancybox.close(),o=!1}),800),!1):(c=(s=["modal--bottom"]).some((e=>r.hasClass(e))))&&!n?(n=!0,r.removeClass("modal--visible"),setTimeout((function(){e.fancybox.close(),n=!1}),800),!1):void 0},e(document).on("beforeClose.fb",(function(){e(".modal--order-info").length&&e(".page-content").removeClass("modal-active-right")}))})),window.addEventListener("load",initCitySelect),window.addEventListener("load",initLostPassRequest),window.addEventListener("load",initSwitchReceiptProductAgree),window.addEventListener("load",initEmailCopy),document.addEventListener("pageLoaded",handleOption),document.addEventListener("DOMContentLoaded",(function(){var e,t;(e=document.querySelector("#bx-soa-order-form"))&&e.addEventListener("submit",(function(e){e.preventDefault();for(var t=Array.from(document.querySelectorAll(".order input.input")),o=["MIDDLE_NAME"],n=[],a=!0,i=0;i<t.length;i++){for(var r=!0,s=0;s<o.length;s++)o[s]===t[i].dataset.code&&(r=!1);r&&n.push(t[i])}for(var c=0;c<n.length;c++)n[c].value&&void 0===n[c].dataset.invalid||(n[c].classList.add("input--invalid"),a=!1);if(a){var d=Array.from(document.querySelectorAll(".js-order-submit-btn"));for(c=0;c<d.length;c++)d[c].classList.add("preload-animation");window.BX.Sale.OrderAjaxComponent.doSaveAction()}else window.BX.Sale.OrderAjaxComponent.showError("Извините, остались незаполненные обязательные поля")})),(t=document.querySelector(".js-order-submit-link"))&&t.addEventListener("click",(function(e){e.currentTarget.classList.add("preload-animation")}))})),document.addEventListener("pageLoaded",handleOrderItem),window.addEventListener("resize",handleOverallMobile),document.addEventListener("pageLoaded",handleOverallMobile),document.addEventListener("pageLoaded",handleOverallClick),document.addEventListener("DOMContentLoaded",handlePictureBtn),document.addEventListener("popup:open",(function(e){openPopup(e.detail)})),document.addEventListener("popup:close",closePopup),$(document).on("click",(function(e){$(e.target).hasClass("popup")||0!==$(e.target).parents(".popup").length||$(e.target).is("#popupCart")||0!==$(e.target).parents("#popupCart").length||$(e.target).is("#popupFavorite")||0!==$(e.target).parents("#popupFavorite").length||$(e.target).is("#popupCompare")||0!==$(e.target).parents("#popupCompare").length||$(e.target).hasClass("subscribe__btn")||0!==$(e.target).parents(".subscribe__btn").length||closePopup()})),function(){var e=$("body"),t=$(".front"),o=$(".preloader"),n=$(".preloader__bg");if(o.length<=0)return!1;if(t.length<=0)setTimeout((function(){n.fadeOut(300),e.removeClass("preload")}),100);else{var a=$(".preloader__img"),i=$(".header__bottom")[0].getBoundingClientRect().top,r=a[0].getBoundingClientRect().height;e.addClass("preload"),a.addClass("preloader__img--show"),setTimeout((function(){a.removeClass("preloader__img--show"),e.hasClass("preload")&&a.addClass("preloader__img--pulse")}),2e3),a.css({top:0,transform:`translate(-50%, ${window.innerHeight/2-r/2-i}px)`}),window.addEventListener("load",initAnimations)}}(),$(document).on("click","[data-product-tab]",(function(e){e.preventDefault();var t=this.dataset.productTab,o=$('.product__tabs-top .nav-link[href="'+t+'"]')[0];if(o){o.click();var n=o.closest(".product__tabs-top");n&&$("html, body").animate({scrollTop:$(n).offset().top},600)}})),document.addEventListener("pageLoaded",(function(){var e=$(".product__tabs-top .nav-link").first();e.addClass("active");var t=e.attr("href");$(t).addClass("active show")})),document.addEventListener("pageLoaded",(function(){var e=document.querySelector(".product");if(e){var t=[],o=e.querySelector(".js__favorite"),n=document.querySelector(".header__controls-item-wish a.header__btn").href;$.ajax({url:"/ajax/whishlist/whishlist.php",success:e=>{t=e||[],a()}}),o.addEventListener("click",(function(){if(e.getAttribute("data-product-id")){var o,n,r=!1;for(var s in t)t[s]==$(".product")[0].dataset.productId&&(r=!0);r?(o=e.getAttribute("data-product-id"),$.ajax({url:"/ajax/sale/basket/",type:"post",data:{action:"remove",id:o},dataType:"json",success:function(e){if("OK"===e.STATUS){for(var r in t)t[r]==o&&t.splice(r,1);a(),i(),n=new CustomEvent("favourites:del-success",{detail:{message:"Товар успешно удален из избранного"}}),document.dispatchEvent(n)}else n=new CustomEvent("favourites:del-error",{}),document.dispatchEvent(n)},error:function(){n=new CustomEvent("favourites:del-error",{detail:{message:"Internal Server Error"}}),document.dispatchEvent(n)}})):function(e){var o;$.ajax({url:"/ajax/sale/basket/",type:"post",data:{action:"increase",id:e,delay:"Y"},dataType:"json",success:function(n){"OK"===n.STATUS?(t.push(e),a(),i(),o=new CustomEvent("favourites:add-success",{detail:{message:"Товар успешно добавлен в избранное"}}),document.dispatchEvent(o)):(o=new CustomEvent("favourites:add-error",{}),document.dispatchEvent(o))},error:function(){o=new CustomEvent("favourites:add-error",{detail:{message:"Internal Server Error"}}),document.dispatchEvent(o)}})}(e.getAttribute("data-product-id"))}}))}function a(){var n=!1;t.forEach((t=>{t==e.getAttribute("data-product-id")&&(n=!0)})),n?o.classList.add("active"):o.classList.remove("active")}function i(){$(".js__wish_count").text(t.length),t.length?($(".header__controls-item-wish").removeClass("header__controls-item-wish--empty"),$(".js-header-wish-btn a.header__btn")[0].href=n):($(".header__controls-item-wish").addClass("header__controls-item-wish--empty"),$(".js-header-wish-btn a.header__btn")[0].removeAttribute("href"))}})),document.addEventListener("pageLoaded",(function(){var e=document.querySelector(".product");if(e){var t=[],o=e.querySelector(".js__compare");o.addEventListener("click",(function(){if(e.getAttribute("data-product-id")){var o,a,i=!1;for(var r in t)t[r]==$(".product")[0].dataset.productId&&(i=!0);i?(o=e.getAttribute("data-product-id"),$.ajax({url:"/catalog/compare/?action=DELETE_FROM_COMPARE_RESULT&ID="+o,type:"get",complete:function(e){if(200===e.status){for(var i=0;i<t.length;i++)t[i]==o&&t.splice(i,1);n(),a=new CustomEvent("comparison:add-success",{detail:{message:"Товар удалён из сравнения"}}),document.dispatchEvent(a)}else a=new CustomEvent("comparison:add-error",{detail:{message:"Ошибка удаления"}}),document.dispatchEvent(a)}})):function(e){var o;$.ajax({url:"/ajax/compare/list_compare.php",type:"post",data:{id:e,ajax_action:"Y",action:"add"},dataType:"json",success:function(a){"OK"===a.STATUS?(t.push(e),n(),o=new CustomEvent("comparison:add-success",{detail:{message:a.MESSAGE}}),document.dispatchEvent(o)):(o=new CustomEvent("comparison:add-error",{detail:{message:a.MESSAGE}}),document.dispatchEvent(o))},error:function(){o=new CustomEvent("comparison:add-error",{detail:{message:"Internal Server Error"}}),document.dispatchEvent(o)},complete:function(e){return e.MESSAGE}})}(e.getAttribute("data-product-id"))}})),$.ajax({url:"/ajax/compare/list_compare.php?action=getlist",complete:e=>{t=e.responseJSON.COMPARE_LIST,n()}})}function n(){var n=!1;t.forEach((t=>{t==e.getAttribute("data-product-id")&&(n=!0)})),n?o.classList.add("active"):o.classList.remove("active"),$(".js__compare_count").text(t.length),t.length?($(".header__controls-item-compare").removeClass("header__controls-item-compare--empty"),$(".js-header-compare-btn a.header__btn")[0].href="/catalog/compare/"):($(".header__controls-item-compare").addClass("header__controls-item-compare--empty"),$(".js-header-compare-btn a.header__btn")[0].removeAttribute("href"))}})),document.addEventListener("DOMContentLoaded",handleProfile),window.addEventListener("load",handlePromo),document.addEventListener("pageLoaded",(function(){"interactive"===document.readyState?window.addEventListener("load",handlePromo):handlePromo()})),document.addEventListener("pageLoaded",(function(){var e=document.querySelector(".promocode");if(!e)return!1;var t=e.querySelector(".promocode__field");if(!t)return!1;t.addEventListener("focus",(function(){e.classList.contains("promocode--focused")||e.classList.add("promocode--focused")})),e.querySelector(".promocode__btn").addEventListener("click",(function(){var t=Math.random()<.5;e.classList.remove("promocode--success"),e.classList.remove("promocode--error"),t?e.classList.add("promocode--success"):e.classList.add("promocode--error")}))})),document.addEventListener("DOMContentLoaded",handleQuestion),$(window).resize((function(){searchPosition()})),document.addEventListener("pageLoaded",handleSelect),document.addEventListener("pageLoaded",initSlider),$(document).on("click",".js-copy",(function(e){e.preventDefault(),copyToClipboard(window.location.href)}));var isStoreInitialized=!1;function initStore(){if(!window.Vue||!window.Vuex||isStoreInitialized)return!1;window.Vue.use(window.Vuex);var e=new window.Vuex.Store({modules:{catalogfilter:window.catalogFiltersStore}});window.store=e,isStoreInitialized=!0,document.dispatchEvent(new Event("store:init"))}function initStreetviewSlider(){var e=document.querySelector(".modal__address-btn--find"),t=$(".streetview__slider-prev-btn"),o=$(".streetview__slider-next-btn");e.addEventListener("click",(function(){var e=document.querySelector(".modal__address-content-item--find"),n=document.querySelector(".streetview__slider");e.classList.contains("modal__address-content-item--active")&&!n.classList.contains("slick-initialized")&&($(".streetview__slider").slick({infinite:!0,fade:!0,prevArrow:t,nextArrow:o,initialSlide:0}),t.removeClass("slick-arrow"),o.removeClass("slick-arrow"))}))}document.addEventListener("Vue:init",initStore),document.addEventListener("Vuex:init",initStore),window.addEventListener("load",initStreetviewSlider);var easing="cubicBezier(.65,.0,.35,1)";window.fadeTrs={in:function(e){anime({targets:"#swup, .footer",opacity:[0,1],duration:400,easing:easing,complete:function(){setTimeout(e,0)}})},out:function(e){anime({targets:"#swup, .footer",opacity:[1,0],duration:400,easing:easing,complete:function(){setTimeout(e,0)}})}},window.getJSPluginOptions=function(){var e={any:"(.*)",productTrs:"(/build)?/product(/|.html)(.*?)"},t={productTrs:window.productTrs},o=Object.keys(t),n=[{from:e.any,out:function(e){window.fadeTrs.out(e)},to:e.any,in(e){window.fadeTrs.in(e)}}],a=o.reduce((function(n,a){var i=o.filter((function(e){return e!==a})).map((function(o){return{from:e[a],out:function(e){t[a].out(e)},to:e[o],in:function(e){t[o].in(e)}}}));return[].concat(n).concat(i)}),[]),i=o.reduce((function(o,n){var a=[];return a.push({from:e.any,out:function(e){window.fadeTrs.out(e)},to:e[n],in:function(e){t[n].in(e)}}),a.push({from:e[n],out:function(e){t[n].out(e)},to:e.any,in:function(e){window.fadeTrs.in(e)}}),[].concat(o).concat(a)}),n);return[].concat(i).concat(a)};easing="cubicBezier(.65,.0,.35,1)";function productTrsIn(e){anime({targets:"#swup, .footer",opacity:[0,1],duration:600,easing:easing}),anime({targets:".product__logo, .gallery__nav-container",opacity:[0,1],duration:600,delay:200,easing:easing}),anime({targets:".product__top-right",translateY:[72,0],opacity:[0,1],duration:1e3,delay:400,easing:easing}),anime({targets:".gallery__slider",translateY:[88,0],opacity:[0,1],duration:1e3,delay:600,easing:easing,complete:function(){setTimeout(e,0)}})}function initSwup(){var e=new Swup({linkSelector:'\n      a[href]:not([data-no-swup]):not([href^="http"]):not([href^="mailto:"]):not([href^="tel:"]):not([target="_blank"]):not([download]),\n      a[href^="#"]:not([data-no-swup])\n      ',containers:["#swup","#swup-modals"],cache:!1,plugins:[new SwupHeadPlugin,new SwupScrollPlugin({animateScroll:!1}),new SwupJsPlugin(window.getJSPluginOptions())]});window.swupInstance=e,e.on("transitionStart",closeModals),e.on("willReplaceContent",window.loadScripts),e.on("contentReplaced",onContentReplaced),e.on("samePage",reloadPage),handleLoadEvents(["DOMContentLoaded","swup:contentReplaced"])}function handleLoadEvents(e){var t=new CustomEvent("pageLoaded");e.forEach((function(e){document.addEventListener(e,(function(){document.dispatchEvent(t)}))}))}function onContentReplaced(){resetScroll(),document.dispatchEvent(new CustomEvent("swup: contentReplaced",{})),console.log("swup: contentReplaced")}function closeModals(){$.fancybox.close(),window.catalogClose()}function resetScroll(){window.scrollTo(0,0)}function reloadPage(){window.location.reload()}function handleTooltip(){var e=$(".tooltip__trigger");e.on("click",(function(e){e.preventDefault()})),e.popover({placement:"right",html:!0,template:'<div class="popover tooltip__popover" role="tooltip"><div class="popover-body tooltip__content"></div></div>',offset:0})}window.productTrs={in:function(e){window.innerWidth>=992?productTrsIn(e):anime({targets:"#swup, .footer",opacity:[0,1],duration:400,easing:easing,complete:function(){setTimeout(e,0)}})},out:function(e){anime({targets:"#swup, .footer",opacity:[1,0],duration:400,easing:easing,complete:function(){setTimeout(e,0)}})}},window.loadScripts=function(){var e=window.swupInstance.cache.pages[window.location.pathname].blocks.filter((function(e){return e.includes("<script")}));if(!e.length||!window.BX)return!1;e.forEach((e=>{let t=document.createElement("div");t.innerHTML=e,t.querySelectorAll("script").forEach((function(e){window.eval(window.BX.processHTML(e.outerHTML).SCRIPT[0].JS)}))}))},window.disableSwup?handleLoadEvents(["DOMContentLoaded"]):initSwup(),window.goToPage=function(e){window.swupInstance?window.swupInstance.loadPage({url:e}):location.href=e},document.addEventListener("pageLoaded",handleTooltip),$("body").on("click",(function(e){$("[data-toggle=popover]").each((function(){$(this).is(e.target)||0!==$(this).has(e.target).length||0!==$(".popover").has(e.target).length||$(this).popover("hide")}))}));var upOnScroll=function(){$(this).scrollTop()>120?$(".up").fadeIn():$(".up").fadeOut()};function handleUpClick(){$(document).on("click",".up",(function(){return $("body,html").animate({scrollTop:0},500),!1}))}document.addEventListener("pageLoaded",(function(){$(window).off("scroll",upOnScroll),$(".up").length&&$(window).on("scroll",upOnScroll)})),document.addEventListener("DOMContentLoaded",handleUpClick);