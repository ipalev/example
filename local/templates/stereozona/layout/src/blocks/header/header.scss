.header {
  position: sticky;
  z-index: 10;
  top: 0;
  background-color: $gray4;

  &.is-fixed {
    //    top: scaleVW(-14, 1920);

    @include media-breakpoint-down(lg) {
      top: -73px;
    }
  }

  &--white {
    background-color: $white;
  }

  &--border-bottom {
    border-bottom: 1px solid rgba($black, .08);
  }

  @include media-breakpoint-down(lg) {
    position: sticky;
    z-index: 10;
    top: 0;
  }

  &__top {
    position: relative;
    &-line {
      width: 100%;
      height: 1px;

      position: absolute;
      bottom: 0;
      left: 0;

      background: rgba(#000, .08);
    }

    @include media-breakpoint-down(lg) {
      display: none;
    }
  }

  &__top-wrapper {
    display: flex;
    height: scaleVW(72, 1920);
    justify-content: space-between;
    align-items: center;

    @include media-breakpoint-down(lg) {
      height: 72px;
    }
  }

  &__top-menu {
    display: flex;
    font-family: $font-family-serif;
  }

  &__top-link {
    margin-right: 2em;
    font-size: scaleVW(12, 1920);
    text-transform: uppercase;
    color: $dark;

    @include media-breakpoint-down(lg) {
      font-size: 12px;
    }

    &:hover {
      text-decoration: underline;
    }
  }

  &__phone {
    padding-right: scaleVW(16, 1920);
    font-size: scaleVW(16, 1920);
    font-weight: 500;
    background-image: url("data:image/svg+xml,%3Csvg width='12' height='12' viewBox='0 0 12 12' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M3 4.5L6 7.5L9 4.5' stroke='black' stroke-width='1.2' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E%0A");
    background-repeat: no-repeat;
    background-position: right center;
    background-size: scaleVW(12, 1920) auto;

    @include media-breakpoint-down(lg) {
      padding-right: 16px;
      font-size: 16px;
      background-size: 12px auto;
    }
  }

  &__city {
    padding-right: scaleVW(16, 1920);
    font-family: $font-family-serif;
    font-size: scaleVW(12, 1920);
    text-transform: uppercase;
    background-image: url("data:image/svg+xml,%3Csvg width='12' height='12' viewBox='0 0 12 12' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M3 4.5L6 7.5L9 4.5' stroke='black' stroke-width='1.2' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E%0A");
    background-repeat: no-repeat;
    background-position: right center;
    background-size: scaleVW(12, 1920) auto;

    @include media-breakpoint-down(lg) {
      padding-right: 16px;
      font-size: 12px;
      background-size: 12px auto;
    }

    &:hover {
      text-decoration: underline;
    }
  }

  &__phone-wrapper {
    position: relative;
    display: flex;
    align-items: center;
    align-self: stretch;

    &:hover {

      .header__phone-content {
        visibility: visible;
        opacity: 1;
      }
    }
  }

  &__phone-content {
    position: absolute;
    z-index: 1;
    top: 100%;
    right: 0;
    padding: scaleVW(24, 1920);
    visibility: hidden;
    width: scaleVW(224, 1920);
    opacity: 0;
    text-align: right;
    background: $light-mint;
    transition: $transition-base;

    @include media-breakpoint-down(lg) {
      padding: 24px;
      width: 224px;
    }
  }

  &__controls-item {
    .header__btn-content {
      position: absolute;
      z-index: 1;
      top: 100%;
      right: 0;
      display: none;
      width: scaleVW(262, 1920);
      padding: scaleVW(24, 1920);
      visibility: hidden;
      opacity: 0;
      background: $light-mint;
      transition: $transition-base;

      .header__btn-content-title {
        margin-bottom: 8px;
        font-family: $font-family-sans-serif;
        font-weight: 500;
        font-size: scaleVW(16, 1920);
        line-height: 110%;
        letter-spacing: 0.02em;
      }

      .header__btn-content-subtitle {
        // margin-bottom: scaleVW(16, 1920);
        margin-bottom: 0;
        font-size: scaleVW(14, 1920);
        letter-spacing: 0.02em;
        line-height: 100%;
      }

      .header__btn-content-link {
        height: 30px;
        padding: 6px 16px;

        font-family: $font-family-serif;
        text-transform: uppercase;
        font-size: scaleVW(12, 1920);
        letter-spacing: 0.04em;
        color: #000;
        white-space: nowrap;
        border-radius: 16px;
        background: rgba(0, 0, 0, 0.1);
        cursor: pointer;

        @include media-breakpoint-down(sm) {
          font-size: 12px;
        }
      }

      @include media-breakpoint-down(lg) {
        width: 262px;
        padding: 24px;
        font-size: 16px;
      }
    }

    &.controls-modal .header__btn-content {
      visibility: visible;
      opacity: 1;
    }
  }

  &__bottom-wrapper {
    display: flex;
    justify-content: space-between;
    align-items: center;

    @include media-breakpoint-down(lg) {
      height: 72px;
    }

    .logo {
      position: absolute;
      top: 50%;
      left: 50%;

      @include media-breakpoint-down(xs) {
        width: scaleVW(162, 375);
        text-align: center;
      }
    }
  }

  &__bottom {
    position: relative;
  }

  &__controls-wrapper {
    display: flex;
  }

  &__search {
    display: none;
  }

  &__btn {
    position: relative;
    transition: $transition-base;
    cursor: pointer;

    &:hover {
      opacity: .6;
    }
  }

  &__btn-count {
    position: absolute;
    bottom: scaleVW(14, 1920) * (-1);
    left: scaleVW(13, 1920);
    display: block;
    width: scaleVW(20, 1920);
    height: scaleVW(20, 1920);
    font-size: scaleVW(12, 1920);
    line-height: scaleVW(20, 1920);
    font-weight: 500;
    text-align: center;
    color: #fff;
    background: $mint;
    border-radius: 50%;

    @include media-breakpoint-down(lg) {
      bottom: -10px;
      left: 13px;
      width: 20px;
      height: 20px;
      font-size: 12px;
      line-height: 20px;
    }
  }

  &__btn-price {
    margin-top: scaleVW(2, 1920);
    padding-left: scaleVW(14, 1920);
    display: inline-block;
    font-size: scaleVW(16, 1920);
    line-height: 100%;
    font-weight: 500;
    vertical-align: middle;
    letter-spacing: .02em;

    @include media-breakpoint-down(lg) {
      margin-top: 2px;
      padding-left: 14px;
      font-size: 16px;
    }

    @include media-breakpoint-down(md) {
      display: none;
    }
  }

  &__controls-item {
    padding-right: scaleVW(24, 1920);

    &.header__controls-item-compare--empty,
    &.header__controls-item-wish--empty,
    &.header__controls-item-cart--empty {
      .header__btn-count {
        display: none;
      }

      .header__btn-content {
        display: block;
      }
    }

    @include media-breakpoint-down(lg) {
      display: none;
    }

    img {
      max-width: scaleVW(24, 1920);

      @include media-breakpoint-down(lg) {
        max-width: 20px;
      }
    }

    &:last-child {
      padding-right: 0;
    }

    &--mobile {

      @include media-breakpoint-down(lg) {
        display: block;
      }
    }
  }
}

.preloader ~ .header {
  transition: opacity 0;
  transition: opacity 0.4s cubic-bezier(0.2, 0, 0.2, 1);

  .logo {
    opacity: 0;
  }
  .header__city, .header__phone, .header__top-menu {
    transition: opacity 0.8s cubic-bezier(0.2, 0, 0.2, 1), transform 0.8s cubic-bezier(0.2, 0, 0.2, 1);
    transform: translateY(-48px);
    opacity: 0;
  }
  .header__bottom {
    transition: opacity 0.8s cubic-bezier(0.2, 0, 0.2, 1) 0.8s;
    opacity: 0;
  }
  .header__top-line {
    opacity: 0;
    transition: opacity 1.1s cubic-bezier(0.42, 0, 0.58, 1) 0.6s;
  }
}

.header {
  .menu__link,
  .header__controls-wrapper {
    @media (min-width: 1200px) {
      transition: opacity 0.3s ease;
    }
  }
}

.header--search-active {
  .menu__catalog-link,
  .menu__catalog-content,
  .menu__link,
  .header__controls-wrapper {
    @media (min-width: 1200px) {
      opacity: 0;
      pointer-events: none;
    }
  }
}
